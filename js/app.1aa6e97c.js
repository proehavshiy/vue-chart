(function(){"use strict";var t={7118:function(t,e,a){var n=a(9242),i=a(3396);const s={class:"btn"};function r(t,e,a,n,r,o){return(0,i.wg)(),(0,i.iD)("button",s,[(0,i.WI)(t.$slots,"default",{},void 0,!0)])}var o={name:"main-button"},l=a(89);const u=(0,l.Z)(o,[["render",r],["__scopeId","data-v-6ef67203"]]);var c=u;const d=["value"];function p(t,e,a,n,s,r){return(0,i.wg)(),(0,i.iD)("input",{type:"text",value:a.modelValue,onInput:e[0]||(e[0]=(...t)=>r.changeInputValue&&r.changeInputValue(...t))},null,40,d)}var m={name:"form-input",emits:["update:modelValue","validate"],props:{modelValue:{type:[String,Number,null],required:!0}},methods:{changeInputValue(t){this.$emit("update:modelValue",t.target),this.$emit("validate",t.target)}}};const f=(0,l.Z)(m,[["render",p]]);var v=f;const h={class:"section-heading"};function g(t,e,a,n,s,r){return(0,i.wg)(),(0,i.iD)("h1",h,[(0,i.WI)(t.$slots,"default",{},void 0,!0)])}var b={name:"section-heading"};const y=(0,l.Z)(b,[["render",g],["__scopeId","data-v-dc3383bc"]]);var _=y,w=a(7139);const I={class:"modal__content"};function D(t,e,a,n,s,r){return(0,i.wg)(),(0,i.iD)("div",{class:(0,w.C_)(["modal",{modal_visible:a.visibility}])},[(0,i._)("div",I,[(0,i.WI)(t.$slots,"default")])],2)}var S={name:"modal-info",props:{visibility:{type:Boolean,default:!1}}};const k=(0,l.Z)(S,[["render",D]]);var O=k;const A={class:"error-message"};function M(t,e,a,s,r,o){return(0,i.wg)(),(0,i.j4)(n.uT,{name:"fade"},{default:(0,i.w5)((()=>[(0,i._)("span",A,[(0,i.WI)(t.$slots,"default",{},void 0,!0)])])),_:3})}var x={name:"error-message"};const $=(0,l.Z)(x,[["render",M],["__scopeId","data-v-77b355f6"]]);var C=$;const j=["for"];function F(t,e,a,s,r,o){const l=(0,i.up)("error-message");return(0,i.wg)(),(0,i.iD)("section",null,[(0,i.WI)(t.$slots,"default",{},void 0,!0),(0,i._)("label",{class:"label",for:a.labelFor},(0,w.zw)(a.title),9,j),(0,i.wy)((0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,w.zw)(a.errorMessage),1)])),_:1},512),[[n.F8,a.errorMessage]])])}var V={name:"form-section",props:{labelFor:{type:String,required:!0},title:{type:String,required:!0},errorMessage:{type:String,default:""}}};const W=(0,l.Z)(V,[["render",F],["__scopeId","data-v-8fa758c2"]]);var T=W,E=[c,v,_,O,C,T];const U={class:"app"};function Z(t,e,a,n,s,r){const o=(0,i.up)("nav-bar"),l=(0,i.up)("router-view"),u=(0,i.up)("modal-info");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("main",U,[(0,i.Wm)(o),(0,i.Wm)(l)]),(0,i.Wm)(u,{visibility:t.modalStatus.status},{default:(0,i.w5)((()=>[(0,i.Uk)((0,w.zw)(t.modalStatus.message),1)])),_:1},8,["visibility"])],64)}const P={class:"navbar"},L={class:"navbar__nav"},Y=(0,i.Uk)(" Аналитика "),q=(0,i.Uk)(" Выйти ");function N(t,e,a,n,s,r){const o=(0,i.up)("main-button");return(0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("div",{class:"navbar__logo",onClick:e[0]||(e[0]=e=>t.$router.push({name:"auth"}))}," AdStats.ex "),(0,i._)("nav",L,["analytics"!==this.$route.name?((0,i.wg)(),(0,i.j4)(o,{key:0,class:"navbar__btn",onClick:e[1]||(e[1]=e=>t.$router.push({name:"analytics"}))},{default:(0,i.w5)((()=>[Y])),_:1})):(0,i.kq)("",!0),"analytics"===this.$route.name?((0,i.wg)(),(0,i.j4)(o,{key:1,class:"navbar__btn navbar__btn_logout",onClick:r.logOut},{default:(0,i.w5)((()=>[q])),_:1},8,["onClick"])):(0,i.kq)("",!0)])])}var B=a(65);function H(t){const e=localStorage.getItem(t);return e?[!0,JSON.parse(e)]:[!1,{}]}var R={name:"nav-bar",methods:{...(0,B.OI)({setAnalyticsData:"setAnalyticsData",setSiteId:"setSiteId"}),logOut(){this.setAnalyticsData([]),this.setSiteId("");const[t,{siteId:e}]=H("analytics-app-store");t&&!e&&this.$router.push({name:"auth"})}}};const X=(0,l.Z)(R,[["render",N],["__scopeId","data-v-aa3898d6"]]);var z=X,K={components:{NavBar:z},data(){return{}},computed:{...(0,B.rn)({modalStatus:t=>t.analytics.modalStatus})},beforeMount(){const[t,{siteId:e,data:a}]=H("analytics-app-store");t&&(this.setSiteId(e),this.setAnalyticsData(a),this.$router.push({name:"analytics"}))},methods:{...(0,B.OI)({setAnalyticsData:"setAnalyticsData",setSiteId:"setSiteId"})}};const G=(0,l.Z)(K,[["render",Z]]);var J=G,Q=a(678);const tt={class:"app__page auth-page"},et=(0,i.Uk)("LeadHit");function at(t,e,a,n,s,r){const o=(0,i.up)("section-heading"),l=(0,i.up)("auth-form");return(0,i.wg)(),(0,i.iD)("div",tt,[(0,i.Wm)(o,{class:"app__heading"},{default:(0,i.w5)((()=>[et])),_:1}),(0,i.Wm)(l,{class:"auth-page__form",inputData:t.inputData,"onUpdate:inputData":t.setInputData,submitCallback:r.submitCallback},null,8,["inputData","onUpdate:inputData","submitCallback"])])}const nt={class:"form__fieldset"},it=(0,i.Uk)(" Войти ");function st(t,e,a,s,r,o){const l=(0,i.up)("form-input"),u=(0,i.up)("form-section"),c=(0,i.up)("main-button");return(0,i.wg)(),(0,i.iD)("form",{class:"form",onSubmit:e[0]||(e[0]=(0,n.iM)(((...t)=>o.handleSubmit&&o.handleSubmit(...t)),["prevent"])),noValidate:""},[(0,i._)("fieldset",nt,[(0,i.Wm)(u,{class:"form__section",labelFor:"id",title:r.label.id,errorMessage:t.errorMessage.id},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:(0,w.C_)(["form__input",{form__input_invalid:t.errorMessage.id}]),id:"id",name:"id",placeholder:r.placeHolder.id,"model-value":a.inputData.id,"onUpdate:modelValue":o.handleInput,onValidate:t.checkInputValidity,required:"",type:"text",minlength:"24",maxLength:"24"},null,8,["class","placeholder","model-value","onUpdate:modelValue","onValidate"])])),_:1},8,["title","errorMessage"])]),(0,i.Wm)(c,{class:"form__submit",disabled:!this.formValidity},{default:(0,i.w5)((()=>[it])),_:1},8,["disabled"])],32)}var rt={data(){return{errorMessage:{},formValidity:!1}},methods:{checkInputValidity(t){const e=t.closest("form").checkValidity(),{validity:{valid:a,badInput:n,valueMissing:i,tooShort:s,tooLong:r,typeMismatch:o,patternMismatch:l,rangeOverflow:u,rangeUnderflow:c,stepMismatch:d}}=t;if(n&&(this.errorMessage[t.name]="Введено недопустимое значение"),l&&(this.errorMessage[t.name]="Некорректный формат данных"),u&&(this.errorMessage[t.name]=`значение более ${t.max}`),c&&(this.errorMessage[t.name]=`значение менее ${t.min}`),i&&(this.errorMessage[t.name]="Поле является обязательным"),s&&(this.errorMessage[t.name]=`id сайта должен содержать ${t.minLength} симв.`),r&&(this.errorMessage[t.name]=`id сайта должен содержать ${t.maxLength} симв.`),o&&(this.errorMessage[t.name]=`Поле не соответствует типу ${t.type}`),d){const e=t.step.toString().indexOf("."),a=t.step.toString().slice(e+1).length;this.errorMessage[t.name]=`Дробная часть - не более ${a} знаков`}a&&(this.errorMessage[t.name]=""),this.formValidity=e}}},ot={components:{FormSection:T},name:"auth-form",mixins:[rt],props:{inputData:{type:Object,required:!0},submitCallback:{type:Function,required:!0}},data(){return{placeHolder:{id:"Введите id"},label:{id:"id сайта"}}},methods:{handleInput({name:t,value:e}){this.$emit("update:inputData",{inputType:t,value:e})},handleSubmit(){this.submitCallback(),this.formValidity&&(this.formValidity=!1)}}};const lt=(0,l.Z)(ot,[["render",st],["__scopeId","data-v-4044c77d"]]);var ut=lt,ct={components:{AuthForm:ut,SectionHeading:_},computed:{...(0,B.rn)({inputData:t=>t.analytics.inputData})},methods:{submitCallback(){const t=()=>this.$router.push({name:"analytics"});this.fetchAnalyticsData(t)},...(0,B.OI)({setInputData:"setInputData"}),...(0,B.nv)({fetchAnalyticsData:"fetchAnalyticsData"})}};const dt=(0,l.Z)(ct,[["render",at]]);var pt=dt;const mt={class:"app__page analytics-page"},ft=(0,i.Uk)("Аналитика");function vt(t,e,a,n,s,r){const o=(0,i.up)("section-heading"),l=(0,i.up)("Chart");return(0,i.wg)(),(0,i.iD)("div",mt,[(0,i.Wm)(o,{class:"app__heading"},{default:(0,i.w5)((()=>[ft])),_:1}),(0,i.Wm)(l,{data:t.analyticsData},null,8,["data"])])}const ht={class:"chart",ref:"chartdiv"};function gt(t,e,a,n,s,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ht,null,512)])}var bt=a(4061),yt=a(1268),_t=a(4548),wt=a(9846);bt.FgM(_t.Z);const It=(t,e)=>{const a=t.titles.create();return a.text=e,a.fontSize=25,a.marginBottom=30,a},Dt=(t,e,a)=>{const n=t.series.push(new yt.eh);n.dataFields.dateX=e,n.dataFields.valueY=a,n.stroke=bt.$_Y("#3F3F3F"),n.properties.fill=bt.$_Y("#3F3F3F"),n.tooltipText="{valueY.value}",n.tooltip.getFillFromObject=!1,n.tooltip.background.fill=bt.$_Y("#7BAE73");const i=n.bullets.push(new yt.RI);return i.circle.radius=2,n},St=t=>{t.cursor=new yt.Ll,t.cursor.lineY.disabled=!0},kt=(t,e)=>{const a=new yt.lQ;a.series.push(e),t.scrollbarX=a,t.scrollbarX.parent=t.bottomAxesContainer,t.scrollbarX.background.fill=bt.$_Y("#B4B4B4"),t.scrollbarX.background.fillOpacity=.2;const n=t.scrollbarX.scrollbarChart.xAxes.getIndex(0);return n.renderer.labels.template.disabled=!0,n.renderer.grid.template.disabled=!0,t.scrollbarX.minHeight=10,a};function Ot(t,e,a){const n=bt.Ue8(t,yt.zO);n.language.locale=wt.Z,n.data=e;const i=n.xAxes.push(new yt.SO);i.renderer.grid.template.disabled=!0;const s=n.yAxes.push(new yt.mn);s.title.text="Визиты",s.title.fontWeight="bold",s.renderer.grid.template.disabled=!0,s.tooltip.disabled=!0,s.renderer.minWidth=35;const r=Dt(n,"date","visits");return It(n,a),St(n),kt(n,r),n}var At={name:"linear-chart",props:{data:{type:Array,required:!0}},mounted(){this.chart=Ot(this.$refs.chartdiv,this.data,"Аналитика по визитам")},onUnmount(){this.chart&&this.chart.dispose()}};const Mt=(0,l.Z)(At,[["render",gt],["__scopeId","data-v-7cce3c62"]]);var xt=Mt,$t={components:{Chart:xt},computed:{...(0,B.rn)({analyticsData:t=>t.analytics.analyticsData})}};const Ct=(0,l.Z)($t,[["render",vt]]);var jt=Ct;const Ft={class:"error-page"},Vt=(0,i.Uk)(" 404 такой страницы нет ");function Wt(t,e,a,n,s,r){const o=(0,i.up)("section-heading");return(0,i.wg)(),(0,i.iD)("div",Ft,[(0,i.Wm)(o,{class:"error-page__heading"},{default:(0,i.w5)((()=>[Vt])),_:1})])}var Tt={components:{SectionHeading:_}};const Et=(0,l.Z)(Tt,[["render",Wt]]);var Ut=Et;const Zt=[{path:"/",name:"auth",component:pt},{path:"/analytics",name:"analytics",component:jt,meta:{requireSiteId:!0}},{path:"/:pathMatch(.*)*",name:"errorPage",component:Ut}],Pt=(0,Q.p7)({history:(0,Q.PO)("/vue-chart/"),routes:Zt});Pt.beforeEach(((t,e,a)=>{if(t.matched.some((t=>t.meta.requireSiteId))){const[t,{siteId:e}]=H("analytics-app-store");a(!(!t||!e)||{name:"auth"})}else a(!0)}));var Lt=Pt,Yt=a(5103),qt=a(6265),Nt=a.n(qt),Bt={RESPONSE_URL:"https://track-api.leadhit.io/client/test_auth",API_KEY:"5f8475902b0be670555f1bb3:eEZn8u05G3bzRpdL7RiHCvrYAYo",ANALYTICS_DATA:[{date:"2020-07-01",visits:213},{date:"2020-07-02",visits:249},{date:"2020-07-03",visits:179},{date:"2020-07-04",visits:170},{date:"2020-07-05",visits:184},{date:"2020-07-06",visits:202},{date:"2020-07-07",visits:198},{date:"2020-07-08",visits:168},{date:"2020-07-09",visits:176},{date:"2020-07-10",visits:171},{date:"2020-07-11",visits:190},{date:"2020-07-12",visits:154},{date:"2020-07-13",visits:246},{date:"2020-07-14",visits:250},{date:"2020-07-15",visits:227},{date:"2020-07-16",visits:140},{date:"2020-07-17",visits:170},{date:"2020-07-18",visits:125},{date:"2020-07-19",visits:106},{date:"2020-07-20",visits:207},{date:"2020-07-21",visits:222},{date:"2020-07-22",visits:198},{date:"2020-07-23",visits:204},{date:"2020-07-24",visits:213},{date:"2020-07-25",visits:145},{date:"2020-07-26",visits:166},{date:"2020-07-27",visits:163},{date:"2020-07-28",visits:135},{date:"2020-07-29",visits:45}]};const{RESPONSE_URL:Ht,API_KEY:Rt,ANALYTICS_DATA:Xt}=Bt,zt={state:()=>({inputData:{id:""},siteId:"",analyticsData:[],modalStatus:{status:!1,message:""}}),getters:{},mutations:{setInputData(t,{inputType:e,value:a}){t.inputData[e]=a},setSiteId(t,e){t.siteId=e},setAnalyticsData(t,e){t.analyticsData=e},setModalStatus(t,{status:e,message:a}){t.modalStatus={status:e,message:a}}},actions:{async fetchAnalyticsData({state:t,commit:e},a){try{const n=await Nt().get(Ht,{headers:{"Api-Key":Rt,"Leadhit-Site-Id":t.inputData.id}}),{data:{message:i}}=n;"ok"===i&&(e("setSiteId",t.inputData.id),e("setAnalyticsData",Xt),a())}catch(n){e("setModalStatus",{status:!0,message:"Ошибка: Неверный Leadhit-site-id"})}finally{e("setInputData",{inputType:"id",value:""}),setTimeout((()=>{e("setModalStatus",{status:!1,message:""})}),2e3)}}}},Kt=new Yt.ZP({key:"analytics-app-store",storage:window.localStorage,reducer:t=>({siteId:t.analytics.siteId,data:t.analytics.analyticsData}),filter:t=>"setSiteId"===t.type||"setAnalyticsData"===t.type});var Gt=(0,B.MT)({plugins:[Kt.plugin],modules:{analytics:zt},strict:!1});const Jt=(0,n.ri)(J);E.forEach((t=>{Jt.component(t.name,t)})),Jt.use(Gt).use(Lt).mount("#app")}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,n,i,s){if(!n){var r=1/0;for(c=0;c<t.length;c++){n=t[c][0],i=t[c][1],s=t[c][2];for(var o=!0,l=0;l<n.length;l++)(!1&s||r>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(o=!1,s<r&&(r=s));if(o){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,i,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var s=Object.create(null);a.r(s);var r={};t=t||[null,e({}),e([]),e(e)];for(var o=2&i&&n;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((function(t){r[t]=function(){return n[t]}}));return r["default"]=function(){return n},a.d(s,r),s}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,n){return a.f[n](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+{265:"canvg",297:"xlsx",643:"pdfmake"}[t]+"."+{265:"dc4d1dd7",297:"9be36666",643:"11bde914"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vue-chart:";a.l=function(n,i,s,r){if(t[n])t[n].push(i);else{var o,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+s){o=d;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",e+s),o.src=n),t[n]=[i];var p=function(e,a){o.onerror=o.onload=null,clearTimeout(m);var i=t[n];if(delete t[n],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(t){return t(a)})),e)return e(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/vue-chart/"}(),function(){var t={143:0};a.f.j=function(e,n){var i=a.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise((function(a,n){i=t[e]=[a,n]}));n.push(i[2]=s);var r=a.p+a.u(e),o=new Error,l=function(n){if(a.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,i[1](o)}};a.l(r,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,s,r=n[0],o=n[1],l=n[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var c=l(a)}for(e&&e(n);u<r.length;u++)s=r[u],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(c)},n=self["webpackChunkvue_chart"]=self["webpackChunkvue_chart"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(7118)}));n=a.O(n)})();
//# sourceMappingURL=app.1aa6e97c.js.map